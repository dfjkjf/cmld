---
sort: 1
---

# 常用命令

## git

### 修改提交

`git commit --amend`用于修改最近一次提交的信息或添加/删除文件。它将打开最近一次提交的编辑器，允许您修改提交消息、添加或删除文件，然后重新提交更改。

**警告**：
- 使用 `git commit --amend` 会覆盖最近一次提交新提交将取代最近一次提交，并且最近一次提交的哈希值将更改。如果您与他人协作，在使用 `git commit --amend` 之前，请务必与他们沟通。这将有助于避免冲突和数据丢失。
- 新提交将取代最近一次提交，并且最近一次提交的哈希值将更改。如果您已经推送更改到远程仓库，就不能使用 `git commit --amend` 来修改最近一次提交。

### 合并提交

假设您有一个名为 `my-repo` 的 Git 仓库，并且您已经推送了五个提交：`feat: add feature 1`、`feat: add feature 2`、`feat: add feature 3`、`feat: add feature 4` 和 `feat: add feature 5`。要将提交 2、3 和 4 合并为一个提交，您可以使用以下命令：
```bash
git rebase -i HEAD~5
```
在编辑器中，您可以将提交列表更改如下：
```bash
pick feat: add feature 5
pick feat: add feature 2
squash feat: add feature 3
squash feat: add feature 4
pick feat: add feature 1
```
保存并退出编辑器后，Git 将创建一个新的提交历史记录，其中包含一个合并后的提交，消息为`feat: add features 2、3 和 4`。

**注意**：在使用 `git rebase -i` 合并提交之前，请务必与协作者沟通，以避免冲突和数据丢失。

### 复制提交

假设你想将提交 abc123 从 other-branch 分支复制到 my-branch 分支。你可以使用以下命令：
1. 切换到自己的分支：`git checkout my-branch`
2. 复制其他分支上的提交：`git cherry-pick abc123`
3. 提交代码：`git add <file-path>``git commit --amend`
4. 推送更改：`git push origin my-branch`

**警告**：
- cherry-pick 不会自动解决合并冲突。你需要手动解决冲突并提交修复。
- cherry-pick 不会修改原始提交的历史记录。它将在目标分支中创建一个新的提交，引用原始提交。
- 如果要复制多个提交，可以使用 `git cherry-pick -n` 命令。这将允许你逐个查看提交并选择要复制的提交。

### 修改线上仓库

假设您有一个名为 my-repo 的 GitHub 仓库，并且您已经提交了一个错误的更改。要回退到上一个提交，您可以使用以下步骤：
1. 切换到上一个提交：`git checkout HEAD~1`
2. 强制推送更改：`git push -f origin HEAD`

现在，您的远程仓库将回退到上一个提交。

**警告**：在使用 -f 选项之前，请务必仔细考虑。这将覆盖其他人可能已经从远程仓库拉取的更改。

## top

