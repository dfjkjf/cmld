---
sort: 7
---

# C++新特性

## 类型转换

`static_cast` ：这是 C++ 中最常用的类型转换方法。它在编译时执行，当您在数据类型之间进行显式转换时应该使用它;
`dynamic_cast` ：此方法专门用于在类层次结构中的基类和派生类之间安全地转换指针和引用;
`reinterpret_cast` ：此转换更改指针、引用或整数值的类型。它也称为按位转换，因为它改变了编译器解释底层位的方式。仅当您对自己正在做的事情有深入了解时才使用 reinterpret_cast ，因为它不能保证结果值有意义;
`const_cast` ：此转换方法用于从变量中删除 const 限定符。通常不建议这样做，但在某些无法控制变量常量的情况下可能很有用。
```c++
int a = 10;
float b = static_cast<float>(a); // static_cast from int to float

class Base {};
class Derived : public Base {};
Base* base_ptr = new Derived();
Derived* derived_ptr = dynamic_cast<Derived*>(base_ptr); // dynamic_cast from Base* to Derived*

int* a = new int(42);
long b = reinterpret_cast<long>(a); // reinterpret_cast from int* to long

const int a = 10;
int* ptr = const_cast<int*>(&a);  // const_cast from const int* to int*
*ptr = 20;
```

## Lambda 函数

匿名函数，可以更轻松地创建函数对象。

```c++
auto add = [](int a, int b) -> int { return a + b; };
int sum = add(42, 13); // sum is equal to 55
```

c++14 通用 lambda 函数：允许使用 "auto "类型占位符声明 lambda 函数参数。
```c++
auto add = [](auto a, auto b) { return a + b; };
auto sum_i = add(42, 13); // Still works with integers
auto sum_f = add(3.14, 2.72); // Now works with doubles too
```

## 

允许您使用模板参数定义变量。
```c++
template <typename T>
constexpr T pi = T(3.1415926535897932385);
float r = pi<float>; // Instantiated as a float
double d = pi<double>; // Instantiated as a double
```

## 时间

使用 chrono 库来处理日期和时间，该库是标准库 (STL) 的一部分。 chrono 库提供了各种数据类型和函数来表示和操作持续时间、时间点和时钟。

`duration` 表示时间跨度，可以用秒、分钟、小时等各种单位表示。要创建持续时间，请使用 std::chrono::duration 模板类。常见的预定义持续时间类型有：
- std::chrono::seconds
- std::chrono::minutes
- std::chrono::hours

```c++
#include <iostream>
#include <chrono>

int main() {
    std::chrono::seconds sec(5);
    std::chrono::minutes min(2);
    std::chrono::hours hr(1);
    return 0;
}
```

`time_point` 代表特定时间点。它通常是使用持续时间和时钟的组合来创建的。在 C++ 中， chrono 库提供了三种时钟类型：
- std::chrono::system_clock: 代表系统范围的实时挂钟。
- std::chrono::steady_clock: 表示保证永远不会被调整的单调时钟。
- std::chrono::high_resolution_clock: 表示时钟周期最短的时钟。

```c++
#include <iostream>
#include <chrono>

int main() {
    std::chrono::system_clock::time_point tp = std::chrono::system_clock::now();
    return 0;
}
```

`clock` 时钟提供对当前时间的访问。它由以下元素组成
- time_point: 特定时间点。
- duration: 两个时间点之间的持续时间。
- now(): 返回当前时间点的静态函数。

```c++
#include <iostream>
#include <chrono>

int main() {
    // Get the current time_point using system_clock
    std::chrono::system_clock::time_point now = std::chrono::system_clock::now();

    // Get the time_point 1 hour from now
    std::chrono::system_clock::time_point one_hour_from_now = now + std::chrono::hours(1);
    return 0;
}
```

要将时间点转换为日历表示形式，可以使用 std::chrono::system_clock::to_time_t 函数。

```c++
#include <iostream>
#include <chrono>
#include <ctime>

int main() {
    std::chrono::system_clock::time_point now = std::chrono::system_clock::now();
    std::time_t now_c = std::chrono::system_clock::to_time_t(now);
    std::cout << "Current time: " << std::ctime(&now_c) << std::endl;
    return 0;
}
```
