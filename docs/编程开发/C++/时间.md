---
sort: 7
---

# 时间

使用 chrono 库来处理日期和时间，该库是标准库 (STL) 的一部分。 chrono 库提供了各种数据类型和函数来表示和操作持续时间、时间点和时钟。

1. `duration` 表示时间跨度，可以用秒、分钟、小时等各种单位表示。要创建持续时间，请使用 std::chrono::duration 模板类。常见的预定义持续时间类型有：
- std::chrono::nanoseconds
- std::chrono::milliseconds
- std::chrono::microseconds
- std::chrono::seconds
- std::chrono::minutes
- std::chrono::hours

2. `time_point` 代表特定时间点。它通常是使用持续时间和时钟的组合来创建的。在 C++ 中， chrono 库提供了三种时钟类型：
- std::chrono::system_clock: 代表系统范围的实时挂钟。
- std::chrono::steady_clock: 表示保证永远不会被调整的单调时钟。
- std::chrono::high_resolution_clock: 表示时钟周期最短的时钟。

3. `clock` 时钟提供对当前时间的访问。它由以下元素组成
- std::chrono::time_point: 特定时间点。
- std::chrono::duration: 两个时间点之间的持续时间。
- now(): 返回当前时间点的静态函数。

4. 要将时间点转换为日历表示形式，可以使用 std::chrono::system_clock::to_time_t 函数。

```c++
#include <iostream>
#include <chrono>
#include <thread>
#include <ctime>

int main() {
    std::chrono::time_point<std::chrono::steady_clock> start, end;
 
    start = std::chrono::steady_clock::now();
    std::this_thread::sleep_for(std::chrono::seconds(3)); // 睡眠3秒
    end = std::chrono::steady_clock::now();
 
    std::chrono::duration<double> elapsed_seconds = end - start;
    std::time_t end_time = std::chrono::system_clock::to_time_t(end);
 
    std::cout << "finished computation at " << std::ctime(&end_time)
              << "elapsed time: " << elapsed_seconds.count() << "s\n";
    return 0;
}

Output:

finished computation at Wed Jan  4 05:13:48 2017
elapsed time: 2.14538s
```

此外，C++11还提供了`std::this_thread::sleep_until`函数，它允许线程休眠直到某个指定的未来时间点。这需要传递一个`time_point`对象作为参数。
